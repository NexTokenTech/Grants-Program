# TREX - Timed Release Encryption Xing chains - Phase II
- **Team Name:** [NexToken Technology](https://github.com/NexTokenTech)
- **Payment Address:** 0x478189352D495F07409Ee2952d4B051855EB7014(USDT)
- **[Level](https://github.com/w3f/Grants-Program/tree/master#level_slider-levels):** 2

## Project Overview:
This is an application for a follow-up grant for the [TREX_Network](https://github.com/NexTokenTech/Grants-Program/blob/main/applications/TREX_Network.md) that has been completed in the following delivery: <https://github.com/w3f/Grant-Milestone-Delivery/pull/724>

### Overview
The main goal of this stage is to perfect the ecosystem related to key holders, which includes key splitting, distributed encryption and its tools, visualized encryption and decryption dApp, and the key holder economic system.

### Project Details

#### Architecture

The following diagrams and descriptions shows a high-level overview of the system logical components.

#### **Key Splitting**
Private key splitting is a security measure suitable for distributed systems. It divides a private key into multiple parts, each encrypted with a different shielding public key generated by different key holder workers. Even if one of the private key fragments is leaked, attackers cannot obtain the complete private key, thereby increasing the security of the private key. Publicly verifiable algorithms can be used to verify the correctness of the merged private key. This process can be completed by different participants, making verification more reliable. In the TREX dApp for sending cipher and the TREX Indexing Backend, we integrate SecretSharing to split the private key, encrypt the split keys with different key holders' shielding public keys, and recover the private key at the TREX Indexing Backend.

![keysplitting](https://res.cloudinary.com/dckpvckvh/image/upload/v1679457693/keyholder_wkrsze.png)

#### **TREX Indexing Backend**
 The Substrate Archive plays a critical role in providing reliable long-term data storage and archiving for the TREX blockchain. Based on this, we customize it to support the functionality of TREX nodes. A backend solution needs to be developed that can query and process data from TREX nodes, perform decryption operations at the appropriate time, and archive the decrypted data accordingly. We use the customized database of the substrate archive to archive the data of the TREX node and write a backend program to recover the private key fragments after decryption, decrypt the corresponding cipher, and return it.

![indexingbackend](https://res.cloudinary.com/dckpvckvh/image/upload/v1679457693/indexing_backend_ituo7x.png)

#### **TREX Tool**
 In addition to wallet functions such as transfers, we have added the function of sending cipher up the chain. This function integrates the SecretSharing function to ensure the security of the cipher by using distributed secret key encryption.

#### **TREX dApp**
 As part of the open-source ecosystem of TREX, we need a dApp to visually display the cipher sent by users and the decrypted plaintext after decryption to achieve a closed loop. Through the operation of the TREX Indexing Backend, this dApp provides a user-friendly interface for users to interact with the TREX blockchain and view their encrypted and decrypted messages. By providing a visual display of the encryption and decryption process, the TREX dApp enhances the user experience and makes it easier for users to utilize the distributed encryption feature of TREX.

#### **Incentive Mechanism of Keyholders**
 Each user who uses a key holder's shielding key to encrypt private key fragments will be charged for their ext on-chain according to the ext size and other metrics. This part of the fee will be reserved for the corresponding key holder and locked. After the key holder successfully decrypts the corresponding private key and is linked, this part of the fee will be unlocked, and the key holder will receive the reward.

![incentivemechanism](https://res.cloudinary.com/dckpvckvh/image/upload/v1679457692/income_icmoa9.png)

#### **Real-time Blockchain Timestamp**
 We run the Beefy client in an SGX enclave to obtain real-time timestamps of blocks in Polkadot. The SGX enclave provides a secure environment for running the client, ensuring that the client's code and data are protected from external threats. By running the client in an SGX enclave, we can obtain accurate and reliable timestamps of blocks in Polkadot, which are critical for various applications, such as smart contracts and decentralized finance. This approach ensures that the timestamps are trustworthy and secure, enhancing the overall security and reliability of the Polkadot network.

### Ecosystem Fit

- Where and how does your project fit into the ecosystem?

Our final goal is to create a new frontier of dAPPs with dTRE technology in the Web3 domain. The Polkadot ecosystem provides very comprehensive and advanced support for cross-chain interoperability. With Polkadot relay chains, bridges and parachains, arbitrary data could be encrypted with our dTRE technology and transferred across various blockchains, and triggered future events on any other blockchains. The Polkadot multi-chain network allows us to explore the full potential of our dTRE technology since it may be integrated with the whole web3 network and create a large number of new dApps.

- Who is your target audience (parachain/dapp/wallet/UI developers, designers, your own user base, some dapp's userbase, yourself)?

Our target audience is whoever needs to send a temporarily confidential message in the future. It could have a list of applications/businesses including but not limited to 

  1. Decentralized strategy market (to replace the centralized service like [tipranks.com](https://www.tipranks.com) ) 
  2. Decentralized prediction market (to replace the centralized service like [predictit.org](https://www.predictit.org) )
  3. Universal key escrow (encrypted arbitrary crypto key to hold the escrow fund and release in the future)
  4. Decentralized voting system (encrypted ballot and reveal it in the future)
  5. Decentralized blind bidding (encrypted all bids and reveal in the deadline to find the final bid winner)

Any creators and developers with the above applications could be our target audience. For example, they could be parachains and dApps that provide decentralized trading platforms, strategy markets, prediction markets and so on.

- What need(s) does your project meet?

Essentially, the world needs [decentralized reputations](https://newsletter.thedefiant.io/p/-decentralized-reputation-is-about-a8b) to open a new Web3 frontier. Our dTRE technology helps dApp dev and owners build up their decentralized reputations and creates marketplaces for temporarily confidential data. Therefore, the early access privilege to the dTRE data can be traded so that the reputed content creator can sell their strategies or predictions. Additionally, the dTRE technology can support a range of new Web3 applications that need features for timed data release.

- Are there any other projects similar to yours in the Substrate / Polkadot / Kusama ecosystem?

No, according to our best knowledge, we are creating all new decentralized applications in the Web3 domain. We don't see similar projects in blockchains providing decentralized timed-release encryption (dTRE) services.
We believe that the dTRE technology will radically change many existing centralized applications since it builds up a trustless and permissionless mechanism to send a message to the future and create markets for early access or subscription.

## Team:

### Team members

- Leo Yu (executive, finance and product)
- Fanghao Yang (research, engineering, and technology development)
- Oscar Wang (operation and human resource)
- Xingqiu Yuan (chief scientist)
- Dan Yin (senior software engineer)

### Contact

- **Contact Name:** Leo Yu
- **Contact Email:** team@trex.ink
- **Website:** www.trex.ink

### Legal Structure

- **Registered Address:** 165 ARRETON RD, PRINCETON, NEW JERSEY 08540
- **Registered Legal Entity:** NexToken Technology LLC

### Team's experience

Leo Yu: Serial entrepreneur of crypto technology startup companies with several successful entrepreneurial projects and good investment returns. Excellency at integrating international resources and having an outstanding strategic development vision. Proficiency in communication with global clients and team coordination skills. [Resume](https://1drv.ms/b/s!AmAQnrV8ivm-hqx4tSxtL5LBTynnCA?e=NiON2k)

Fanghao Yang: former researcher & software engineer in IBM Research, US DOE national lab at Princeton University, worked with a few startup companies leading a team of developers. See the [LinkedIn page below](#team-linkedin-profiles).

Oscar Wang: Serial entrepreneur with more than ten years of business management and marketing experience covering markets from technology to manufacturing. More than five years of experience as a general manager of large-scale enterprises, with excellent skills in solving complex problems, business planning, team management, and interpersonal skills, strong learning ability in new fields, and firm team-oriented. [Resume](https://1drv.ms/b/s!AmAQnrV8ivm-hqxz2lU8gDhlMasAmA?e=KqTwvi)

Xingqiu Yuan: chief research scientist in US DOE national labs for distributed computing and large-scale HPC software design. See the [LinkedIn page below](#team-linkedin-profiles).

Dan Yin: 10+ years of experience in the development of fintech services and software [Resume](https://1drv.ms/b/s!AmAQnrV8ivm-hqx3VjTtmlBvMlYZ4g).

### Team Code Repos

- https://github.com/NexTokenTech
- https://github.com/NexTokenTech/TREX
- https://github.com/NexTokenTech/trex-keyholder
- https://github.com/NexTokenTech/trex-archive
- https://github.com/NexTokenTech/trex-subxt
- https://github.com/NexTokenTech/elgamal_trex

Please also provide the GitHub accounts of all team members. If they contain no activity, references to projects hosted elsewhere or live are also fine.

- https://github.com/yangfh2004
- https://github.com/xyuan
- https://github.com/kaisuki

### Team LinkedIn Profiles

- https://www.linkedin.com/in/fanghaoyang/
- https://www.linkedin.com/in/xingqiu-yuan-68b62b38/

## Development Status:

- TREX core node code ([GitHub repo](https://github.com/NexTokenTech/TREX))

The recently version of dTRE technology uses PoS consensus, which is now working on the new node software leveraging confidential computing hardware to achieve the same or even better results.

- TREX core keyholder code ([GitHub repo](https://github.com/NexTokenTech/trex-keyholder))

Each keyholder will register as an enclave worker on the blockchain, and provide a shielding public key for user encryption. Also is used to monitor the blocks generated by the TREX node, and to periodically decrypt the information encrypted with its own shielding public key. After decrypting the information, it will be sent to the chain.

- TREX block index engine ([GitHub repo](https://github.com/NexTokenTech/trex-archive))

It is in progress to be integrated with our business partners to support the deployment of the dTRE technology in existing platforms with the rabbitMQ message broker.

- TREX API library ([GitHub repo](https://github.com/NexTokenTech/trex-subxt))

Tested and successfully submitted dTRE data to the TREX blockchain node.

## Development Roadmap :
****Overview****

- **Total Estimated Duration:** 9 Months
- **Full-Time Equivalent (FTE):**  2
- **Total Costs:** 30,000 USD

### Milestone 1 — Implement distributed encryption and decryption.

- **Estimated duration:** 3 months
- **FTE:**  2
- **Costs:** 12,000 USD

| Number | Deliverable | Specification |
| -----: | ----------- | ------------- |
| 0a. | License | MIT License
| 0b. | Documentation | We will provide both **inline documentation** of the code, API documentation and a basic **tutorial** that explains How to split the private key, encrypt it using the shielding public key, and organize the transaction for on-chain submission. and private key restoration in TREX Indexing Backend.|
| 0c. | Testing Guide | Core functions will be fully covered by unit tests to ensure functionality and robustness. In the guide, we will describe how to run these tests. |
| 0d. | Docker | We will provide a Dockerfile(s) that can be used to test all the functionality delivered with this milestone. |
| 0e. | Article | We will publish an online documents that explains how this module works as described in the following figure.
| 1. | Private Key Splitting | Split the key and distribute encrypted key fragments.
| 2. | TREX Indexing Backend | Archive block data, recover the key, decrypt the ciphertext with the recovered key, and rollback.

### Milestone 2 - dApp

- **Estimated duration:** 2 months
- **FTE:**  2
- **Costs:** 8,000 USD

| Number | Deliverable | Specification |
| -----: | ----------- | ------------- |
| 0a. | License | MIT License
| 0b. | Documentation | We will provide both **inline documentation** of the code, API documentation and a basic **tutorial** that explains how a dApp user can publish his timed-release data on the blockchain. And then visualize it. |
| 0c. | Testing Guide | Core functions will be fully covered by unit tests to ensure functionality and robustness. In the guide, we will describe how to run these tests. |
| 0d. | Docker | We will provide a Dockerfile(s) that can be used to test all the functionality delivered with this milestone. |
| 0e. | Article | We will publish an online documents that explains how this module works as described in the following figure.
| 1. | TREX Tool | A tool for users to transfer funds and send distributed ciphertext to the chain.
| 2. | TREX dApp | Constructing a visualized ecosystem for encrypted data in collaboration with TREX Indexing Backend.

### Milestone 3 — Incentive Mechanism of Keyholders And Time Security

- **Estimated duration:** 4 months
- **FTE:**  2
- **Costs:** 10,000 USD

| Number | Deliverable | Specification |
| -----: | ----------- | ------------- |
| 0a. | License | MIT License
| 0b. | Documentation | We will provide both **inline documentation** of the code, API documentation and a basic **tutorial** that explains the keyholder incentive mechanism and obtaining real-time block timestamp. |
| 0c. | Testing Guide | Core functions will be fully covered by unit tests to ensure functionality and robustness. In the guide, we will describe how to run these tests. |
| 0d. | Docker | We will provide a Dockerfile(s) that can be used to test all the functionality delivered with this milestone. |
| 0e. | Article | We will publish an online documents that explains how this module works as described in the following figure.
| 1. | Incentive Mechanism of Keyholders | The keyholder profit mechanism encourages more people to join the keyholder working nodes. Keyholders can unlock rewards only after decrypting the data.
| 2. | Real-time Blockchain Timestamp | Run the beefy light client in the enclave to make real-time timestamp requests for cross-chain blocks, ensuring the distributed security of release time and greater trustworthiness than NTS.


## Future Plans
In the short term, our team is working on landing the first dTRE infrastructure on the Web3 frontier and promoting the technology in the Polkadot/Substrate ecosystem.
- As long as more funding and resource are allocated, the latest confidential computing technology (e. g. [Intel TDX](https://www.intel.com/content/www/us/en/developer/articles/technical/intel-trust-domain-extensions.html) ) will be supported and integrated into the TREX node. As an active open-source project, TREX will follow up on trends and development in confidential computing hardware and integrate solutions from different chip makers to support various hardware. Since only the off-chain workers use the TEE, many different versions of off-chain workers may co-exist on our network as long as it fits our remote attestation policy.
- In the long run, we focus on expanding the cross-chain applications and interoperability with the Polkadot ecosystem. We are working on many software tools, deployable containers, and API libraries for dApp developers using dTRE technology in their applications. While more and more users and dApp devs join the TREX network, we will design the sharding solution to reduce the data insertion fee on the layer-1 network so that dTRE applications can be more affordable.


## Additional Information :heavy_plus_sign:

**How did you hear about the Grants Program?** Web3 Foundation Website and Twitter.
